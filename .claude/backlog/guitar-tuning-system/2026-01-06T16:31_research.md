---
feature: Guitar Tuning System Enhancement
created: 2026-01-06T16:31
status: research-complete
---

# Research: Guitar Tuning System Enhancement

## Feature Request Summary

1. **Bug Fix (DONE)**: Restore `guitar_tuning` sync that was accidentally broken on this branch
2. **Enhancement**: Expand default tuning options for guitar and bass
3. **Seed Data**: Add tuning variations to seed data

## Current State Analysis

### What Already Exists (Production)

**Supabase Schema** (main branch + production):

- `guitar_tuning TEXT DEFAULT 'Standard'` column exists in songs table

**Song Model** (`src/models/Song.ts:12`):

```typescript
guitarTuning?: string  // Already exists
```

**UI Tuning Dropdown** (`src/components/songs/NewSongModal.tsx:9-19`):

```typescript
const GUITAR_TUNINGS = [
  'Standard (EADGBE)',
  'Drop D',
  'Drop C',
  'Drop B',
  'Half Step Down',
  'Whole Step Down',
  'Open G',
  'Open D',
  'DADGAD',
]
```

### Bug Fixed on This Branch

**Issue**: This feature branch accidentally removed `guitar_tuning` from:

1. Baseline migration (schema)
2. RemoteRepository sync (both send and receive)

**Fix Applied**:

1. Restored `guitar_tuning TEXT DEFAULT 'Standard'` to baseline schema
2. Restored sync in `mapSongToSupabase()`
3. Restored sync in `mapSongFromSupabase()`

## Enhancement: Expanded Tuning Options

### Current Options (9)

- Standard (EADGBE)
- Drop D, Drop C, Drop B
- Half Step Down, Whole Step Down
- Open G, Open D, DADGAD

### Proposed Additions

**Guitar (6-string) - 5 new:**

- Drop A
- C Standard
- Open E
- Open A
- Double Drop D (DADGBD)

**Guitar (7-string) - 2 new:**

- Standard 7 (BEADGBE)
- Drop A 7 (AEADGBE)

**Guitar (8-string) - 2 new:**

- Standard 8 (F#BEADGBE)
- Drop E 8 (EBEADGBE)

**Bass (4-string) - 3 new:**

- Standard Bass (EADG)
- Drop D Bass (DADG)
- Half Step Down Bass (Eb Ab Db Gb)

**Bass (5-string) - 2 new:**

- Standard 5 Bass (BEADG)
- Drop A 5 Bass (AEADG)

**Bass (6-string) - 1 new:**

- Standard 6 Bass (BEADGC)

**Total: 9 current + 15 new = 24 options**

## Files to Update for Tuning Options

| File                                         | Purpose                                 |
| -------------------------------------------- | --------------------------------------- |
| `src/components/songs/NewSongModal.tsx:9-19` | New song form                           |
| `src/components/songs/AddSongForm.tsx:56-82` | Alternative song form                   |
| `src/pages/NewLayout/SongsPage.tsx`          | Song edit form (check if separate list) |

### Recommended: Centralize Tuning Constants

Create `src/constants/tunings.ts`:

```typescript
export const GUITAR_TUNINGS = [
  // 6-string
  { value: 'Standard', label: 'Standard (EADGBE)', strings: 6, type: 'guitar' },
  {
    value: 'Half Step Down',
    label: 'Half Step Down (Eb)',
    strings: 6,
    type: 'guitar',
  },
  {
    value: 'Whole Step Down',
    label: 'Whole Step Down (D)',
    strings: 6,
    type: 'guitar',
  },
  { value: 'Drop D', label: 'Drop D', strings: 6, type: 'guitar' },
  { value: 'Drop C', label: 'Drop C', strings: 6, type: 'guitar' },
  { value: 'Drop B', label: 'Drop B', strings: 6, type: 'guitar' },
  { value: 'Drop A', label: 'Drop A', strings: 6, type: 'guitar' },
  { value: 'C Standard', label: 'C Standard', strings: 6, type: 'guitar' },
  { value: 'Open G', label: 'Open G (DGDGBD)', strings: 6, type: 'guitar' },
  { value: 'Open D', label: 'Open D (DADF#AD)', strings: 6, type: 'guitar' },
  { value: 'Open E', label: 'Open E (EBEG#BE)', strings: 6, type: 'guitar' },
  { value: 'Open A', label: 'Open A (EAEAC#E)', strings: 6, type: 'guitar' },
  { value: 'DADGAD', label: 'DADGAD', strings: 6, type: 'guitar' },
  {
    value: 'Double Drop D',
    label: 'Double Drop D (DADGBD)',
    strings: 6,
    type: 'guitar',
  },
  // 7-string
  {
    value: 'Standard 7',
    label: 'Standard 7-String (BEADGBE)',
    strings: 7,
    type: 'guitar',
  },
  {
    value: 'Drop A 7',
    label: 'Drop A 7-String (AEADGBE)',
    strings: 7,
    type: 'guitar',
  },
  // 8-string
  {
    value: 'Standard 8',
    label: 'Standard 8-String (F#BEADGBE)',
    strings: 8,
    type: 'guitar',
  },
  {
    value: 'Drop E 8',
    label: 'Drop E 8-String (EBEADGBE)',
    strings: 8,
    type: 'guitar',
  },
]

export const BASS_TUNINGS = [
  // 4-string
  {
    value: 'Standard Bass',
    label: 'Standard Bass (EADG)',
    strings: 4,
    type: 'bass',
  },
  {
    value: 'Drop D Bass',
    label: 'Drop D Bass (DADG)',
    strings: 4,
    type: 'bass',
  },
  {
    value: 'Half Step Down Bass',
    label: 'Half Step Down Bass (Eb)',
    strings: 4,
    type: 'bass',
  },
  // 5-string
  {
    value: 'Standard 5 Bass',
    label: 'Standard 5-String Bass (BEADG)',
    strings: 5,
    type: 'bass',
  },
  {
    value: 'Drop A 5 Bass',
    label: 'Drop A 5-String Bass (AEADG)',
    strings: 5,
    type: 'bass',
  },
  // 6-string
  {
    value: 'Standard 6 Bass',
    label: 'Standard 6-String Bass (BEADGC)',
    strings: 6,
    type: 'bass',
  },
]

export const ALL_TUNINGS = [...GUITAR_TUNINGS, ...BASS_TUNINGS]

// For dropdowns - just the string values
export const TUNING_OPTIONS = ALL_TUNINGS.map(t => t.value)
```

## Seed Data Updates

**File:** `src/database/seedMvpData.ts`

Add variety of tunings:

- Change some 'Standard' to 'Drop D', 'Half Step Down', etc.
- Add bass-specific tunings to bass-heavy songs

## Implementation Steps

1. ~~Fix schema (add guitar_tuning column)~~ ✅ Done
2. ~~Fix RemoteRepository sync~~ ✅ Done
3. Create `src/constants/tunings.ts` with expanded options
4. Update NewSongModal to use centralized tunings
5. Update AddSongForm to use centralized tunings
6. Update SongsPage edit form if needed
7. Update seed data with tuning variety
8. Test in browser

## Future Scope (Not This Sprint)

Per user input, these are planned for later:

- **Show Casting**: Bands can add equipment to shows to track who plays what guitar on what song
- **Re-tuning Visualization**: Highlight when re-tuning needs to occur between songs in setlist
- **Custom Tuning Catalog**: User/band-defined tuning presets (for now, per-song text is sufficient)
- **Equipment Management**: Track which guitar has which tuning

## Key Learnings

**Branch Schema Drift Issue Discovered:**
This feature branch (`feature/enhanced-practice-workflow`) had diverged from `main` with several schema differences:

- Missing: `guitar_tuning` column in songs table
- Missing: `source_setlist_id` column in setlists table
- Missing: `location` column in shows table
- Added: `song_personal_notes` and `song_note_entries` tables

**Root Cause:** An agent working on this branch likely modified the baseline migration and accidentally removed existing columns while adding new tables.

**Lesson:** Always check `git diff main` before assuming a feature is missing. Production and main branch are the source of truth.

## Next Steps

Ready for implementation:

- Create tunings constant file
- Update UI components
- Update seed data

**Note:** The bug fix (restoring `guitar_tuning` sync) has been applied to this branch. The enhancement (expanding options) is ready to implement when resuming.
