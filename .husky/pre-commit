# Run lint-staged for formatting/linting
npx lint-staged

# Verify ER diagram is up-to-date with schema
# Only check if migration or diagram files changed
CHANGED_FILES=$(git diff --cached --name-only)
if echo "$CHANGED_FILES" | grep -qE "(supabase/migrations/|diagrams/generated/)"; then
  echo "üîç Schema files changed - verifying ER diagram is up-to-date..."
  npm run schema:diagram:check
fi
